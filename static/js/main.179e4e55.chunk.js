(this.webpackJsonpskyline=this.webpackJsonpskyline||[]).push([[0],{123:function(e,t){},125:function(e,t){},143:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(35),i=n.n(r),s=n(12),o=n(202),l=n(201),u=n(190),j=n(203),b=n(191),d=n(196),h=n(96),f=n.n(h),m=n(93),O=n(79),x=n(15),p=n(197),v=n(194),g=n(199),y=n(200),k=n(2),w=function(e){var t=e.item,n=e.factorX,c=e.factorY,r=e.connectToLastItem,i=e.startNewItem,o=e.svgHeight,u=Object(a.useState)(!1),j=Object(s.a)(u,2),d=j[0],h=j[1],f=Object(a.useState)("0,0,0,0.3"),m=Object(s.a)(f,2),O=m[0],x=m[1],w=Object(a.useState)(""),C=Object(s.a)(w,2),I=C[0],N=C[1],S=function(){return h(!1)};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("rect",{x:t.position*n,y:0,width:t.duration*n,height:t.duration*c,style:{fill:"rgba(".concat(O,")"),strokeWidth:t.selected?"2":"1",stroke:"black"},onClick:function(e){e.altKey?h(!0):e.shiftKey?r(t):i(t)}}),Object(k.jsx)("text",{x:n*(t.duration/2+t.position),y:o-t.duration*c-5,textAnchor:"middle",style:{transform:"scale(1, -1)",transformOrigin:"center"},children:I}),Object(k.jsxs)(p.a,{open:d,onClose:S,children:[Object(k.jsx)(v.a,{children:"Edit Box"}),Object(k.jsxs)(g.a,{children:[Object(k.jsx)(b.a,{label:"Label",size:"small",value:I,onChange:function(e){return N(e.target.value)}}),Object(k.jsx)(b.a,{label:"Color",size:"small",value:O,onChange:function(e){return x(e.target.value)},placeholder:"Enter in the form 'r,g,b,a'"})]}),Object(k.jsx)(y.a,{children:Object(k.jsx)(l.a,{onClick:S,children:"Close"})})]})]})},C=function(e){var t=e.ceiledMaxDuration,n=e.y,a=e.width;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("line",{className:"orientationLine",x1:0,y1:n,x2:a,y2:n,stroke:"black",strokeDasharray:"4"}),Object(k.jsxs)("text",{x:0,y:40,style:{transform:"scale(1, -1)",transformOrigin:"center"},children:[t,"s"]})]})},I=function(e){return function(t,n,a,c){var r=c[a+e];if((a+e-1)%e!==0||!r)return t;var i=parseFloat(n.data[0]),s=parseFloat(r.data[0]);if(isNaN(i))return t;var o={position:i,duration:s-i,label:n.data[1],selected:!1};return[].concat(Object(x.a)(t),[o])}},N=function(e){var t=e.data,n=e.levels,c=e.factorX,r=e.factorY,i=Object(a.useState)([]),o=Object(s.a)(i,2),l=o[0],u=o[1],j=function(e){var t=l.at(-1);t.duration+=e.duration,t.position=Math.min(t.position,e.position),u((function(e){return[].concat(Object(x.a)(e.slice(0,-1)),[t])}))},b=function(e){var t=Object(O.a)(Object(O.a)({},e),{},{selected:!0}),n=l.at(-1);n?(n.selected=!1,u((function(e){return[].concat(Object(x.a)(e.slice(0,-1)),[n,t])}))):u((function(e){return[].concat(Object(x.a)(e),[t])}))};if(!t)return null;var d=n.map((function(e){return t.reduce(I(e),[])})).reduce((function(e,t){return[].concat(Object(x.a)(e),[t])}),[]),h=Math.max.apply(Math,[].concat(Object(x.a)(t.reduce(I(Math.max.apply(Math,Object(x.a)(n))),[]).map((function(e){return e.duration}))),Object(x.a)(l.map((function(e){return e.duration}))))),f=10*Math.ceil(h/10),m=f*r+50,p=t.at(-1).data[0]*c;return Object(k.jsxs)("svg",{width:p,height:m,style:{bottom:"1rem",position:"absolute",transform:"scale(1, -1)",transformOrigin:"center"},children:[Object(k.jsx)("g",{className:"connectedItems",children:l.map((function(e,t){return Object(k.jsx)(w,{item:e,factorX:c,factorY:r,connectToLastItem:j,startNewItem:b,svgHeight:m},"connectedItem".concat(t))}))}),d&&d.reverse().map((function(e,t){return Object(k.jsx)("g",{className:"level".concat(t),children:e.map((function(e,t){return Object(k.jsx)(w,{item:e,factorX:c,factorY:r,connectToLastItem:j,startNewItem:b,svgHeight:m},"box".concat(t))}))},"durations".concat(t))})),Object(k.jsx)(C,{ceiledMaxDuration:f,y:f*r,width:p})]})},S=(n(143),function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)([]),h=Object(s.a)(i,2),O=h[0],x=h[1],p=Object(a.useState)(1),v=Object(s.a)(p,2),g=v[0],y=v[1],w=Object(a.useState)(5),C=Object(s.a)(w,2),I=C[0],S=C[1],M=Object(a.useState)(!1),F=Object(s.a)(M,2),L=F[0],z=F[1],Y=c.a.createRef(),E=c.a.createRef(),H=function(e){Y.current&&Y.current.open(e)},X=function(e){Y.current&&(Y.current.removeFile(e),r(null))};return Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"options",children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(l.a,{onClick:function(){return z(!0)},children:"How to use?"}),Object(k.jsx)(m.a,{ref:Y,onFileLoad:r,onError:function(e,t,n,a){return console.warn(e)},onRemoveFile:function(){r([])},children:function(e){var t=e.file;return Object(k.jsxs)("div",{className:"import",children:[Object(k.jsx)(l.a,{size:"smalL",variant:"contained",onClick:H,children:"open CSV file"}),t&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"filename",children:t&&t.name}),Object(k.jsx)(u.a,{title:"Delete",children:Object(k.jsx)(j.a,{onClick:X,children:Object(k.jsx)(f.a,{})})})]})]})}}),Object(k.jsx)(b.a,{size:"small",label:"Levels",placeholder:"e.g. 1, 3, 6",inputRef:E,onChange:function(){if(E.current){var e=E.current.value;if(e){var t=e.split(",").map((function(e){var t=parseInt(e,10);return isNaN(t)?0:t}));x(t)}else console.log("no level specified")}}}),Object(k.jsx)(b.a,{size:"small",label:"Horizontal stretch",placeholder:"must be a number",type:"number",value:g,onChange:function(e){return y(parseInt(e.target.value,10))}}),Object(k.jsx)(b.a,{size:"small",label:"Vertical stretch",placeholder:"must be a number",value:I,type:"number",onChange:function(e){return S(parseInt(e.target.value,10))}})]})}),Object(k.jsx)(N,{data:n,levels:O,factorX:g,factorY:I}),Object(k.jsxs)(d.a,{className:"help",anchor:"right",open:L,onClose:function(){return z(!1)},children:[Object(k.jsx)("p",{children:"This tool takes time instants exported as a CSV file from Sonic Visualiser as input."}),Object(k.jsxs)("p",{children:['In the "levels" field you can specify, how the different metrical layers are combined. When putting "1", only the lowest metrical unit is displayed, meaning that every time instant is displayed as a box. When putting "3", every ',Object(k.jsx)("i",{children:"third"}),' instant is taken into account, meaning that the boxes combine three metrical units. When putting "1,3", both metrical layers are being displayed. You can specify an arbitrary amount of layers.']}),Object(k.jsx)("p",{children:"In case you want to combine two boxes outside a regular scheme that applies for the whole piece, you can do so be clicking on the first first box, then keeping the shift key down and clicking on an adjecent box. A new box will appear that includes both."}),Object(k.jsx)("h2",{children:"Example"}),Object(k.jsx)("p",{children:"..."})]})]})}),M=document.getElementById("root");i.a.render(Object(k.jsx)(a.StrictMode,{children:Object(k.jsx)(S,{})}),M)}},[[146,1,2]]]);
//# sourceMappingURL=main.179e4e55.chunk.js.map